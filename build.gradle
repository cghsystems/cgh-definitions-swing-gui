apply plugin: 'eclipse'
apply plugin: 'groovy'

version = "2.0"
final env = System.getenv()
final notebookHome = 'C:/dev/notes'

final String SPRING_VERSION = '3.1.0.M2'

gradle.taskGraph.whenReady {taskGraph ->
    if (!taskGraph.hasTask(':release')) {
        version = "${version}-SNAPSHOT"
    }
}

repositories {
    mavenCentral()
    mavenCentral name: "springRepo", urls: "http://maven.springframework.org/milestone"
}

dependencies {
    groovy group: 'org.codehaus.groovy', name: 'groovy-all', version: '1.8.0'
    
    compile group: 'com.melloware', name: 'jintellitype', version: '1.3.3'

    compile group: 'commons-logging', name: 'commons-logging', version: '1.1.1'
    compile group: 'cglib', name: 'cglib', version: '2.2.2'
    compile group: 'log4j', name: 'log4j', version: '1.2.16'

    testCompile group: 'junit', name: 'junit', version: '4.8.2'
}

//jar {
   // from configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
//}

manifest.mainAttributes(
    'Implementation-Title': "Notebook",
    'Implementation-Version': version,
    'Main-Class' : "net.cghsystems.notes.Main"
)

//task release(dependsOn: build) { 
 // def executionFile = new File("${notebookHome}", "${archivesBaseName}.bat")
 // if(executionFile.exists()) executionFile.delete() 
 // executionFile << "start javaw -jar ${jar.archivePath.getAbsolutePath()} %1 %2 %3 %4"
//  println "Build Complete"
//}
